<div class="item-body">
    <div ng-if="uri">
        <span class="item-body-tree-handle">
            <span ng-if="loading">
                <i class="fa fa-refresh fa-spin"></i>
            </span>
            <span ng-if="loaded && !readySubitems">
                <i class="fa fa-circle-o"></i>
            </span>
            <span ng-if="loaded && readySubitems && !isOpen" ng-click="open()">
                <i class="fa fa-chevron-circle-right"></i>
            </span>
            <span ng-if="loaded && readySubitems && isOpen" ng-click="close()">
                <i class="fa fa-chevron-circle-down"></i>
            </span>
        </span>

        <span ng-if="!loading" class="pull-right">
            <a class="badge" ng-class="loading ? 'disabled' : ''"
               ng-click="reload()"><i class="fa fa-refresh"
                                      ng-class="loading ? 'fa-spin' : ''"></i></a>
        </span>

        <span ng-if="loading">
            <span>
                {{contextType}}/{{contextId}}: <a href="{{uri}}">{{uri}}</a><br/>
            </span>
        </span>
        <span ng-if="!loading && !loaded">
            <span>
                {{response.status}} - {{response.statusText}}
            </span>
            <span>
                <a href="{{uri}}">{{uri}}</a>
            </span>
        </span>
        <span ng-if="loaded">
            <span ng-switch="data.class">
                <span ng-switch-when="au.org.biodiversity.nsl.Arrangement">
                    This is an arrangement item
                </span>
                <span ng-switch-when="au.org.biodiversity.nsl.Node">
                    node {{contextType}}/{{contextId}}
                </span>
                <div ng-switch-default>
                    This is a {{data.class}} item<br/>
                </div>
            </span>
        </span>
    </div>
    <div ng-if="loaded && subitems" class="item-body-sublist" ng-class="isOpen ? 'item-body-sublist-open' : 'item-body-sublist-closed'">
        <div ng-repeat="i in subitems" itembody uri="{{i.uri}}" context-type="{{i.contextType}}" context-id="{{i.contextId}}"/>
    </div>
</div>